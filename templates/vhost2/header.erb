########################################################################################
## This file is centrally managed by puppet, any manual changes will be OVERWRITTEN   ##
########################################################################################
server {
    listen          <%= @ip_addr %>:<%= @tcp_port %>;
    server_name     <%= @vhost %> <%= @vhost_aliases%>;

    access_log      <%= @log_dir %>/<%= @name %>_access.log;
    error_log       <%= @log_dir %>/<%= @name %>_error.log;

    root            <%= @document_root %>;

    <%- if @https == true -%>
    ssl             on;
    ssl_certificate      <%= @ssl_certificate %>;
    ssl_certificate_key  <%= @ssl_certificate_key %>;
    <%- end -%>

    <%- if @php_proxy == true -%>
    client_max_body_size <%= @client_max_body_size %>;
    port_in_redirect <%= @port_in_redirect %>;
    set_real_ip_from <%= @set_real_ip_from %>;
    real_ip_header <%= @real_ip_header %>;
    <%- end -%>

    <%- if @php_pool != false -%>
    set $custom_php_pool <%= @php_pool %>;
    <%- end -%>

